<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      lang="en" xml:lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Ocean Eddies Web Viewer</title>
  <style type="text/css">
    html, body { margin: 0; padding: 0; height: 100%; }
    body { color: white; background-color: #333348; }

    /* "wrap" is used to make sure that a vertical scrollbar never
       appears on the page.  */
    #wrap { position: absolute; width: 100%; height: 100%; overflow: hidden; }

    #drawingContainer { position: relative; width: 100%; height: 100%;
                        overflow: hidden; }

    /* Configuration option to change GUI scale factor?  */

    #bbwrap { position: absolute; bottom: 0px; width: 100%; text-align: center;
              min-height: 34px; overflow: hidden;
              margin: 0px; padding: 0px; vertical-align: top; }
    #bottomBar { display: /* inline- */ block; overflow: hidden;
                 margin: 0px auto; padding-left: 10px; padding-right: 10px;
                 background-color: #333348; }

    .iconBtns { display: inline-block; height: 34px;
                vertical-align: top;
                margin: 0px;
                padding: 0px;

                /* Warning: The following styles used for CSS buttons
                   may have browser compatibility issues.  */
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                /* user-select: none; */ /* Doesn't validate */
                cursor: default; }
    .iconBtns img, .iconBtns .imgbtn { border-style: solid; border-width: 1px;
                     border-color: white; margin: 0px; padding: 0px;
                     vertical-align: top; }
    .iconBtns .imgbtn { display: inline-block; width: 32px; height: 32px; }
    .spacer { display: inline-block; width: 10px; margin: 0px; padding: 0px; }

    .quickcfg { display: inline-block; height: 32px;
                     vertical-align: top;
                     margin: 0px; margin-top: 1px; margin-bottom: 1px;
                     padding: 0px; }
    .quickcfg input { width: 4em; text-align: center; }
    input#cfg-curDate { width: 7em; }
    input#cfg-latLon { width: 10em; }
    label img { vertical-align: middle; }


    #configWrapper { position: absolute; right: 6px; bottom: 0px;
                     width: 7.5cm; height: auto; max-height: 100%;
                     background-color: rgba(0, 0, 0, 0.25);
                     overflow: auto; }
    #configPanel { width: auto; height: auto;
                   /* NOTE: The margins, though transparent, block
                   mouse events from the canvas underneath.  However,
                   the bottom margin is necessary to prevent overlap
                   with the bottom bar.  */
                   margin-top: 6px; margin-bottom: 40px;
                   background-color: #333356;
                   border: solid black;
                   font-family: sans; font-size: 10pt;
                   padding: 6px; }
    #configPanel fieldset { text-align: right; }
    #configPanel fieldset legend { text-align: left; }

    .numinput { width: 4em; }
    .wideinput { width: auto; }

    #popupInfo { position: absolute; left: 8px; top: 8px;
                 max-width: 10cm; background-color: rgba(0, 0, 0, 0.6);
                 font-family: sans; font-size: 10pt;
                 -moz-border-radius:16px; -webkit-border-radius:16px;
                 border-radius: 16px; padding: 16px; }
    #popupClose { position: absolute; right: 8px; top: 8px;
                  width: 16px; height: 16px;
                  background-image: url("close.png");

                /* Warning: The following styles used for CSS buttons
                   may have browser compatibility issues.  */
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                /* user-select: none; */ /* Doesn't validate */
                cursor: default; }
    #popupClose:active { background-image: url("close_light.png"); }


    /* Note: Button highlight color is "#6a6a96".  */

    #minimize-btn { background-image: url("minimize.png"); }
    #minimize-btn:active { background-image: url("minimize_light.png"); }
    #begin-btn { background-image: url("beginning.png"); }
    #begin-btn:active { background-image: url("beginning_light.png"); }
    #rewind-btn { background-image: url("rewind.png"); }
    #rewind-btn:active { background-image: url("rewind_light.png"); }
    #bstep-btn { background-image: url("step_back.png"); }
    #bstep-btn:active { background-image: url("step_back_light.png"); }
    #pause-btn { background-image: url("pause.png"); }
    #pause-btn:active { background-image: url("pause_light.png"); }
    #play-btn { background-image: url("play.png"); }
    #play-btn:active { background-image: url("play_light.png"); }
    #fstep-btn { background-image: url("step_fwd.png"); }
    #fstep-btn:active { background-image: url("step_fwd_light.png"); }
    #ffwd-btn { background-image: url("fast_forward.png"); }
    #ffwd-btn:active { background-image: url("fast_forward_light.png"); }
    #end-btn { background-image: url("end.png"); }
    #end-btn:active { background-image: url("end_light.png"); }
    #config-btn { background-image: url("config.png"); }
    #config-btn:active { background-image: url("config_light.png"); }
    #help-btn { background-image: url("help.png"); }
    #help-btn:active { background-image: url("help_light.png");
                       outline: none; }
  </style>
</head>
<body onload="bodyInit()">

<noscript>
<div style="margin: 0.5em">

<h1>Sorry</h1>

<p>You need a JavaScript-enabled web browser to use the the
interactive web viewer.</p>

<p>If you can see anything below the following line, then please
ignore it, since it will be unusable to you.</p>

<hr />
</div>
</noscript>

<div id="scriptWrapper" style="display: none">
<script type="text/javascript">
<!--//--><![CDATA[//><!--
document.getElementById('scriptWrapper').style.cssText = '';
//--><!]]>
</script>

<div id="wrap">

<div id="drawingContainer">

  <p id="loadingScreen" style="text-align: center">
    <object type="image/svg+xml"
	    data="../css_gui/loading_composite.svg">
      <img src="../css_gui/loading_composite.png"
	   alt="Decorative Loading Icon." />
    </object><br />
    <strong>Loading</strong>
  </p>

</div>

<div id="popupInfo">
<div id="popupClose"></div>
  <b>Eddy #43859</b><br />
  <br />
  <div style="text-align: right; line-height: 138%">
    Coordinates: 0 N 0 E<br />
    Amplitude: 1.0 cm<br />
    Area: 483 m^2<br />
    Geodesic Speed: 800 km/hr
  </div>
</div>

<div id="configWrapper" style="display: none"><form id="configPanel">
  <fieldset>
    <legend>Eddy Filters</legend>
    <label for="cfg-showCyc">Cyclonic</label>
    <input id="cfg-showCyc" type="checkbox" /><br />
    <label for="cfg-showAntiCyc">Anticyclonic</label>
    <input id="cfg-showAntiCyc" type="checkbox" /><br />
    <label for="cfg-showChelton">Chelton Tracks</label>
    <input id="cfg-showChelton" type="checkbox" /><br />
    <label for="cfg-lenRange" title="Format: min, max">
      Length (weeks):</label>
    <input id="cfg-lenRange" type="text" value="0, max"
	   class="numinput" title="Format: min, max" />
  </fieldset><br />

  <fieldset>
    <legend>Projection</legend>
    <label for="cfg-projMethod">Type:</label>
    <select id="cfg-projMethod">
      <option>Equirectangular</option>
      <option>Mercator</option>
      <option>Robinson</option>
      <option selected="selected">Orthographic</option>
      <option>Perspective</option>
    </select><br />

    <label for="cfg-perspAltitude">Altitude (km):</label>
    <input id="cfg-perspAltitude" type="text" value="35786"
	   disabled="disabled" class="numinput" /><br />
    <label for="cfg-perspFOV">Field of View (deg.):</label>
    <input id="cfg-perspFOV" type="text" value="17.5"
	   disabled="disabled" class="numinput" />

  </fieldset><br />

  <fieldset>
    <legend>Render Parameters</legend>
    <label for="cfg-landMass">Land Masses:</label>
    <select id="cfg-landMass">
      <option>None</option>
      <option>Silhouettes</option>
      <option selected="selected">Textured</option>
    </select><br />
    <label for="cfg-sshPal" title="Sea Surface Height Palette">
      SSH Palette:</label>
    <select id="cfg-sshPal" title="Sea Surface Height Palette">
      <option>None</option>
      <option selected="selected">MATLAB</option>
      <option>Waters</option>
      <option>Hatches</option>
    </select><br />
    <div style="text-align: left">Render Style During Scrolling:</div>
    <label for="cfg-wireRender">Wireframe</label>
    <input id="cfg-wireRender" type="checkbox" /><br />
    <label for="cfg-landScroll">Landmasses</label>
    <input id="cfg-landScroll" type="checkbox" />
  </fieldset>
</form></div>

<!-- NOTE: It is important to have the bottom bar placed as the last
element in the document.  -->
<div id="bbwrap"><form id="bottomBar" action="">

   <div class="iconBtns">
   <div class="imgbtn" id="minimize-btn" title="Auto-Hide"></div>
   </div><!--

--><div class="spacer"></div><!--

--><div class="iconBtns">
   <div class="imgbtn" id="begin-btn" title="Beginning"></div><!--
--><div class="imgbtn" id="rewind-btn" title="Backward faster"></div><!--
--><div class="imgbtn" id="bstep-btn" title="Step backward"></div><!--
--><!-- <div class="imgbtn" id="pause-btn" title="Pause"></div> --><!--
--><div class="imgbtn" id="play-btn" title="Play"></div><!--
--><div class="imgbtn" id="fstep-btn" title="Step forward"></div><!--
--><div class="imgbtn" id="ffwd-btn" title="Forward faster"></div><!--
--><div class="imgbtn" id="end-btn" title="End"></div>
   </div><!--

--><div class="spacer"></div><!--

--><div class="iconBtns">
   <div class="imgbtn" id="config-btn"
	title="Advanced Configuration"></div><!--

--><div class="spacer"></div><!--

--><a class="imgbtn" id="help-btn" title="Help/About"
      href="../web_viewer_notes/"></a>
   </div><!--

--><div class="spacer"></div><!--

--><div class="quickcfg">
   <input id="cfg-curDate" type="text" value="1998-10-02"
	  title="Current Date" />
   <input id="cfg-latLon" type="text" value="0 N 0 E"
	  title="Latitude, Longitude" />
   </div>

   <div class="quickcfg">
   <label for="cfg-scaleFac"
	  title="Scale Factor">
     <img src="scale.png" alt="S:" />
   </label>
   <input id="cfg-scaleFac" type="text" value="1.0"
	  title="Scale Factor" />
   </div>

   <div class="quickcfg">
   <label for="cfg-graticule"
	  title="Graticule (degrees/line)">
     <img src="graticule.png" alt="G:" />
   </label>
   <input id="cfg-graticule" type="text" value="15"
	  title="Graticule (degrees/line)" />
   </div>

</form></div>

</div> <!-- END wrap -->

</div> <!-- END scriptWrapper -->

<script type="text/javascript">
<!--//--><![CDATA[//><!--
  // Preload the button images.
  function loadImages() {

    var files = [ "minimize_light.png", "beginning_light.png",
      "rewind_light.png", "step_back_light.png", "pause.png",
      "pause_light.png", "play_light.png", "step_fwd_light.png",
      "fast_forward_light.png", "end_light.png", "config_light.png",
      "help_light.png", "close_light.png" ];

    var i = 0;
    for (i = 0; i < files.length; i++) {
      btnImages[i] = new Image(); btnImages[i].src = files[i];
    }
  }

  function onunhide(event) {
    document.getElementById('bottomBar').style.cssText = '';
  }

  function onhide(event) {
    document.getElementById('bottomBar').style.cssText = 'display: none';
  }

  function onplay(event) {
    this.id = 'pause-btn';
    this.title = 'Pause';
    this.onclick = onpause;
  };

  function onpause(event) {
    this.id = 'play-btn';
    this.title = 'Play';
    this.onclick = onplay;
  }

  function initGUIHooks() {
    document.getElementById('minimize-btn').onclick = function(event) {
      var bbwrap = document.getElementById('bbwrap');
      if (this.style.cssText == '') {
        this.style.cssText = 'background-image: url("minimize_light.png")';
        bbwrap.onmouseover = onunhide;
        bbwrap.onmouseout = onhide;
      } else {
        this.style.cssText = '';
        bbwrap.onmouseover = null;
        bbwrap.onmouseout = null;
      }
    };

    document.getElementById('begin-btn').onclick = function(event) {
      alert('Beginning');
    };

    document.getElementById('rewind-btn').onclick = function(event) {
      alert('Rewind');
    };

    document.getElementById('bstep-btn').onclick = function(event) {
      dateIndex--;
      document.getElementById('cfg-dateSel').selectedIndex = dateIndex;
      renderEddyTracks();
      refreshOverlay();
      render_globe();
    };

    document.getElementById('play-btn').onclick = onplay;

    document.getElementById('fstep-btn').onclick = function(event) {
      dateIndex++;
      document.getElementById('cfg-dateSel').selectedIndex = dateIndex;
      renderEddyTracks();
      refreshOverlay();
      render_globe();
    };

    document.getElementById('ffwd-btn').onclick = function(event) {
      alert('Fast forward');
    };

    document.getElementById('end-btn').onclick = function(event) {
      alert('End');
    };

    document.getElementById('config-btn').onclick = function(event) {
      var configPanel = document.getElementById('configWrapper');
      if (configPanel.style.cssText == '') {
        configPanel.style.cssText = 'display: none';
        this.style.cssText = '';
      } else {
        configPanel.style.cssText = '';
        this.style.cssText = 'background-image: url("config_light.png")';
      }
    };

    document.getElementById('popupClose').onclick = function(event) {
      var popupInfo = document.getElementById('popupInfo');
      popupInfo.style.cssText = 'display: none';
    };

    var cfg_curDate = document.getElementById('cfg-curDate');
    cfg_curDate.onchange = function(event) {
    };

    var cfg_latLon = document.getElementById('cfg-latLon');
    cfg_latLon.onchange = function(event) {
      var parts = this.value.split(' ');
      tilt = +parts[0];
      lon_rot = (+parts[2]) + 180;
      if (event != null) render_globe();
    };

    var cfg_scaleFac = document.getElementById('cfg-scaleFac');
    cfg_scaleFac.onchange = function(event) {
      scale = +this.value; // Convert string to float
      if (event != null) render_globe();
    };

    var cfg_graticule = document.getElementById('cfg-graticule');
    cfg_graticule.onchange = function(event) {
      var parts = this.value.split(', ');
      grat_density = +parts[0];
      if (event != null) render_globe();
    };

    var cfg_lenRange = document.getElementById('cfg-lenRange');
    cfg_lenRange.onchange = function(event) {
      var parts = this.value.split(', ');
      min_track_len = +parts[0];
      if (parts[1] == 'max')
        max_track_len = -1;
      else
        max_track_len = +parts[1];
      if (event != null) {
        renderEddyTracks();
        refreshOverlay();
        render_globe();
      }
    };

    var cfg_projMethod = document.getElementById('cfg-projMethod');
    cfg_projMethod.onchange = function(event) {
      var choice = this.options[this.selectedIndex].text;
      if (choice == 'Perspective') {
        persp_project = true;
        equirect_project = false;

        var zoomCtl = document.getElementById('cfg-scaleFac');
        zoomCtl.setAttribute('disabled', true); // Needed for Firefox.
        zoomCtl.disabled = true; // Needed for older versions of IE.

        var fovCtl = document.getElementById('cfg-perspFOV');
        fovCtl.setAttribute('disabled', false);
        fovCtl.disabled = false;

        var altCtl = document.getElementById('cfg-perspAltitude');
        altCtl.setAttribute('disabled', false);
        altCtl.disabled = false;

      } else if (choice == 'Equirectangular') {
        persp_project = false;
        equirect_project = true;
      } else {
        persp_project = false;
        equirect_project = false;
      }

      if (choice != 'Perspective') {
        var zoomCtl = document.getElementById('cfg-scaleFac');
        zoomCtl.setAttribute('disabled', false); // Needed for Firefox.
        zoomCtl.disabled = false; // Needed for older versions of IE.

        var fovCtl = document.getElementById('cfg-perspFOV');
        fovCtl.setAttribute('disabled', true);
        fovCtl.disabled = true;

        var altCtl = document.getElementById('cfg-perspAltitude');
        altCtl.setAttribute('disabled', true);
        altCtl.disabled = true;
      }

      if (event != null) render_globe();
    };

    var cfg_perspAltitude = document.getElementById('cfg-perspAltitude');
    cfg_perspAltitude.onchange = function(event) {
      persp_altitude = +this.value;
      if (event != null) render_globe();
    };

    var cfg_perspFOV = document.getElementById('cfg-perspFOV');
    cfg_perspFOV.onchange = function(event) {
      persp_fov = +this.value;
      if (event != null) render_globe();
    };

    var cfg_landMass = document.getElementById('cfg-landMass');
    cfg_landMass.onchange = function(event) {
      var choice = this.options[this.selectedIndex].text;
      if (choice == 'Textured')
        render_land_tex = true;
      else
        render_land_tex = false;
      if (event != null) {
        refreshOverlay();
        render_globe();
      }
    };

    var cfg_sshPal = document.getElementById('cfg-sshPal');
    cfg_sshPal.onchange = function(event) {
      var choice = this.options[this.selectedIndex].text;
      if (choice == 'MATLAB')
        render_ssh = true;
      else if (choice == 'None')
        render_ssh = false;
      if (event != null) {
        refreshOverlay();
        render_globe();
      }
    };

    var cfg_wireRender = document.getElementById('cfg-wireRender');
    cfg_wireRender.onclick = function(event) {
      if (this.checked)
        wire_render = true;
      else
        wire_render = false;
      if (event != null) render_globe();
    };

    /* Once all the GUI hooks have been initialized, call all of the
       event handlers for the FORM controls so that any settings that
       have been saved by the browser will be picked up by the
       internal code.  */
    cfg_curDate.onchange(null);
    cfg_latLon.onchange(null);
    cfg_scaleFac.onchange(null);
    cfg_graticule.onchange(null);
    cfg_lenRange.onchange(null);
    cfg_projMethod.onchange(null);
    cfg_perspAltitude.onchange(null);
    cfg_perspFOV.onchange(null);
    cfg_landMass.onchange(null);
    cfg_sshPal.onchange(null);
    cfg_wireRender.onclick(null);
  }

  function bodyInit() {
    initGUIHooks();
    return initCTModule();
  }

  var btnImages = [];
  loadImages();
  /* Configure the "Help" button to prefer opening the link in a new
     window/tab.  */
  document.getElementById('help-btn').target = '_blank';
//--><!]]>
</script>
<script type="text/javascript"
	src="../canvas_globe_test/globe_render.js"></script>

</body>
</html>
