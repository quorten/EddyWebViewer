#! /bin/sh
# Batch convert CSV SSH data to image-format SSH data.

if [ -z "$FMT" ]; then
    FMT=jpg
fi

if [ "$FMT" = "png" ]; then
    gcc -DBITS_BEF_DEC=8 -DBITS_AFT_DEC=7 csvtotga.c -o csvtotga
else # JPG
    gcc -DBITS_BEF_DEC=6 -DBITS_AFT_DEC=2 csvtotga.c -o csvtotga
fi

trap "rm csvtotga" EXIT

if [ -n "$FAST" ]; then
  ./csvtotga <../data/SSH/ssh_19921014.dat | \
    convert tga:- ../data/${FMT}ssh/ssh_19921014.${FMT}

  # Note: Web browsers cannot reliably work with PNGs that has an
  # unassociated alpha channel, but this would be the option to
  # provide for a PNG with unassociated alpha: -define
  # tiff:alpha=unassociated

  # Also note that it is currently not possible for a web browser to
  # reliably read arbitrary data out of the alpha channel of an image.
  exit
fi

for date in 19921014 19970514 20011212 20060712 19921021 19970521 20011219 20060719 19921028 19970528 20011226 20060726 19921104 19970604 20020102 20060802 19921111 19970611 20020109 20060809 19921118 19970618 20020116 20060816 19921125 19970625 20020123 20060823 19921202 19970702 20020130 20060830 19921209 19970709 20020206 20060906 19921216 19970716 20020213 20060913 19921223 19970723 20020220 20060920 19921230 19970730 20020227 20060927 19930106 19970806 20020306 20061004 19930113 19970813 20020313 20061011 19930120 19970820 20020320 20061018 19930127 19970827 20020327 20061025 19930203 19970903 20020403 20061101 19930210 19970910 20020410 20061108 19930217 19970917 20020417 20061115 19930224 19970924 20020424 20061122 19930303 19971001 20020501 20061129 19930310 19971008 20020508 20061206 19930317 19971015 20020515 20061213 19930324 19971022 20020522 20061220 19930331 19971029 20020529 20061227 19930407 19971105 20020605 20070103 19930414 19971112 20020612 20070110 19930421 19971119 20020619 20070117 19930428 19971126 20020626 20070124 19930505 19971203 20020703 20070131 19930512 19971210 20020710 20070207 19930519 19971217 20020717 20070214 19930526 19971224 20020724 20070221 19930602 19971231 20020731 20070228 19930609 19980107 20020807 20070307 19930616 19980114 20020814 20070314 19930623 19980121 20020821 20070321 19930630 19980128 20020828 20070328 19930707 19980204 20020904 20070404 19930714 19980211 20020911 20070411 19930721 19980218 20020918 20070418 19930728 19980225 20020925 20070425 19930804 19980304 20021002 20070502 19930811 19980311 20021009 20070509 19930818 19980318 20021016 20070516 19930825 19980325 20021023 20070523 19930901 19980401 20021030 20070530 19930908 19980408 20021106 20070606 19930915 19980415 20021113 20070613 19930922 19980422 20021120 20070620 19930929 19980429 20021127 20070627 19931006 19980506 20021204 20070704 19931013 19980513 20021211 20070711 19931020 19980520 20021218 20070718 19931027 19980527 20021225 20070725 19931103 19980603 20030101 20070801 19931110 19980610 20030108 20070808 19931117 19980617 20030115 20070815 19931124 19980624 20030122 20070822 19931201 19980701 20030129 20070829 19931208 19980708 20030205 20070905 19931215 19980715 20030212 20070912 19931222 19980722 20030219 20070919 19931229 19980729 20030226 20070926 19940105 19980805 20030305 20071003 19940112 19980812 20030312 20071010 19940119 19980819 20030319 20071017 19940126 19980826 20030326 20071024 19940202 19980902 20030402 20071031 19940209 19980909 20030409 20071107 19940216 19980916 20030416 20071114 19940223 19980923 20030423 20071121 19940302 19980930 20030430 20071128 19940309 19981007 20030507 20071205 19940316 19981014 20030514 20071212 19940323 19981021 20030521 20071219 19940330 19981028 20030528 20071226 19940406 19981104 20030604 20080102 19940413 19981111 20030611 20080109 19940420 19981118 20030618 20080116 19940427 19981125 20030625 20080123 19940504 19981202 20030702 20080130 19940511 19981209 20030709 20080206 19940518 19981216 20030716 20080213 19940525 19981223 20030723 20080220 19940601 19981230 20030730 20080227 19940608 19990106 20030806 20080305 19940615 19990113 20030813 20080312 19940622 19990120 20030820 20080319 19940629 19990127 20030827 20080326 19940706 19990203 20030903 20080402 19940713 19990210 20030910 20080409 19940720 19990217 20030917 20080416 19940727 19990224 20030924 20080423 19940803 19990303 20031001 20080430 19940810 19990310 20031008 20080507 19940817 19990317 20031015 20080514 19940824 19990324 20031022 20080521 19940831 19990331 20031029 20080528 19940907 19990407 20031105 20080604 19940914 19990414 20031112 20080611 19940921 19990421 20031119 20080618 19940928 19990428 20031126 20080625 19941005 19990505 20031203 20080702 19941012 19990512 20031210 20080709 19941019 19990519 20031217 20080716 19941026 19990526 20031224 20080723 19941102 19990602 20031231 20080730 19941109 19990609 20040107 20080806 19941116 19990616 20040114 20080813 19941123 19990623 20040121 20080820 19941130 19990630 20040128 20080827 19941207 19990707 20040204 20080903 19941214 19990714 20040211 20080910 19941221 19990721 20040218 20080917 19941228 19990728 20040225 20080924 19950104 19990804 20040303 20081001 19950111 19990811 20040310 20081008 19950118 19990818 20040317 20081015 19950125 19990825 20040324 20081022 19950201 19990901 20040331 20081029 19950208 19990908 20040407 20081105 19950215 19990915 20040414 20081112 19950222 19990922 20040421 20081119 19950301 19990929 20040428 20081126 19950308 19991006 20040505 20081203 19950315 19991013 20040512 20081210 19950322 19991020 20040519 20081217 19950329 19991027 20040526 20081224 19950405 19991103 20040602 20081231 19950412 19991110 20040609 20090107 19950419 19991117 20040616 20090114 19950426 19991124 20040623 20090121 19950503 19991201 20040630 20090128 19950510 19991208 20040707 20090204 19950517 19991215 20040714 20090211 19950524 19991222 20040721 20090218 19950531 19991229 20040728 20090225 19950607 20000105 20040804 20090304 19950614 20000112 20040811 20090311 19950621 20000119 20040818 20090318 19950628 20000126 20040825 20090325 19950705 20000202 20040901 20090401 19950712 20000209 20040908 20090408 19950719 20000216 20040915 20090415 19950726 20000223 20040922 20090422 19950802 20000301 20040929 20090429 19950809 20000308 20041006 20090506 19950816 20000315 20041013 20090513 19950823 20000322 20041020 20090520 19950830 20000329 20041027 20090527 19950906 20000405 20041103 20090603 19950913 20000412 20041110 20090610 19950920 20000419 20041117 20090617 19950927 20000426 20041124 20090624 19951004 20000503 20041201 20090701 19951011 20000510 20041208 20090708 19951018 20000517 20041215 20090715 19951025 20000524 20041222 20090722 19951101 20000531 20041229 20090729 19951108 20000607 20050105 20090805 19951115 20000614 20050112 20090812 19951122 20000621 20050119 20090819 19951129 20000628 20050126 20090826 19951206 20000705 20050202 20090902 19951213 20000712 20050209 20090909 19951220 20000719 20050216 20090916 19951227 20000726 20050223 20090923 19960103 20000802 20050302 20090930 19960110 20000809 20050309 20091007 19960117 20000816 20050316 20091014 19960124 20000823 20050323 20091021 19960131 20000830 20050330 20091028 19960207 20000906 20050406 20091104 19960214 20000913 20050413 20091111 19960221 20000920 20050420 20091118 19960228 20000927 20050427 20091125 19960306 20001004 20050504 20091202 19960313 20001011 20050511 20091209 19960320 20001018 20050518 20091216 19960327 20001025 20050525 20091223 19960403 20001101 20050601 20091230 19960410 20001108 20050608 20100106 19960417 20001115 20050615 20100113 19960424 20001122 20050622 20100120 19960501 20001129 20050629 20100127 19960508 20001206 20050706 20100203 19960515 20001213 20050713 20100210 19960522 20001220 20050720 20100217 19960529 20001227 20050727 20100224 19960605 20010103 20050803 20100303 19960612 20010110 20050810 20100310 19960619 20010117 20050817 20100317 19960626 20010124 20050824 20100324 19960703 20010131 20050831 20100331 19960710 20010207 20050907 20100407 19960717 20010214 20050914 20100414 19960724 20010221 20050921 20100421 19960731 20010228 20050928 20100428 19960807 20010307 20051005 20100505 19960814 20010314 20051012 20100512 19960821 20010321 20051019 20100519 19960828 20010328 20051026 20100526 19960904 20010404 20051102 20100602 19960911 20010411 20051109 20100609 19960918 20010418 20051116 20100616 19960925 20010425 20051123 20100623 19961002 20010502 20051130 20100630 19961009 20010509 20051207 20100707 19961016 20010516 20051214 20100714 19961023 20010523 20051221 20100721 19961030 20010530 20051228 20100728 19961106 20010606 20060104 20100804 19961113 20010613 20060111 20100811 19961120 20010620 20060118 20100818 19961127 20010627 20060125 20100825 19961204 20010704 20060201 20100901 19961211 20010711 20060208 20100908 19961218 20010718 20060215 20100915 19961225 20010725 20060222 20100922 19970101 20010801 20060301 20100929 19970108 20010808 20060308 20101006 19970115 20010815 20060315 20101013 19970122 20010822 20060322 20101020 19970129 20010829 20060329 20101027 19970205 20010905 20060405 20101103 19970212 20010912 20060412 20101110 19970219 20010919 20060419 20101117 19970226 20010926 20060426 20101124 19970305 20011003 20060503 20101201 19970312 20011010 20060510 20101208 19970319 20011017 20060517 20101215 19970326 20011024 20060524 20101222 19970402 20011031 20060531 20101229 19970409 20011107 20060607 20110105 19970416 20011114 20060614 20110112 19970423 20011121 20060621 20110119 19970430 20011128 20060628 19970507 20011205 20060705; do

  ./csvtotga <../data/SSH/ssh_${date}.dat | \
    convert tga:- ../data/${FMT}ssh/ssh_${date}.${FMT}
done
